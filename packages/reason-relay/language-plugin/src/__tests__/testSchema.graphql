interface Node {
  id: ID!
}

schema {
  query: Query
  mutation: Mutation
  subscription: Subscription
}

scalar Color

enum UserRole {
  Admin
  User
}

type Query {
  me: User!
  user(id: ID!): User
  userByLocation(location: LocationBounds!): User
  participantById(id: ID!): Participant
  users: [User!]!
  Observer(id: ID!): Observer
  node(id: ID!): Node
}

type Mutation {
  setUserLocation(input: SetUserLocationInput!): SetUserLocationPayload!
}

type Subscription {
  userChanged(input: UserChangedInput!): UserChangedPayload!
}

input UserChangedInput {
  clientMutationId: String
  userId: ID!
}

type UserChangedPayload {
  user: User
}

input SetUserLocationInput {
  clientMutationId: String
  userId: ID!
  location: LocationBounds
}

type SetUserLocationPayload {
  clientMutationId: String
  changedUser: User
}

type User implements Node {
  id: ID!
  firstName: String!
  lastName: String!
  location: Location!
  role: UserRole!
  favoriteColor: Color!
  new: Boolean!
  friendsConnection(
    after: String
    first: Int
    before: String
    last: Int
  ): UserConnection
}

type Observer implements Node {
  id: ID!
  name: String!
  observingUsersConnection(
    after: String
    first: Int
    before: String
    last: Int
  ): UserConnection
}

union Participant = User | Observer

type Location {
  id: ID!
  lat: Float!
  lng: Float!
}

input LocationBounds {
  lat: Float!
  lng: Float!
}

type PageInfo {
  hasNextPage: Boolean!
  hasPreviousPage: Boolean!
  startCursor: String
  endCursor: String
}

type UserConnection {
  pageInfo: PageInfo!
  edges: [UserEdge]
}

type UserEdge {
  node: User
  cursor: String!
}
